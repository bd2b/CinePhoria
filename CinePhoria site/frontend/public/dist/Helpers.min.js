"use strict";var g=function(e,t,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function m(a){try{c(i.next(a))}catch(l){s(l)}}function f(a){try{c(i.throw(a))}catch(l){s(l)}}function c(a){a.done?o(a.value):r(a.value).then(m,f)}c((i=i.apply(e,t||[])).next())})};import{baseUrl as u}from"./Global.js";export const listCinemasConst=["Paris","Bordeaux","Nantes","Lille","Toulouse","Charleroi","Li\xE8ge"];export function getCookie(e){var t;const i=`; ${document.cookie}`.split(`; ${e}=`);if(i.length===2)return(t=i.pop())===null||t===void 0?void 0:t.split(";").shift()}export function setCookie(e,t,n){const i=new Date;i.setTime(i.getTime()+n*24*60*60*1e3),document.cookie=`${e}=${t}; path=/; expires=${i.toUTCString()}`}export function deleteCookie(e){document.cookie=`${e}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}export function extraireMoisLettre(e){const t=e.getMonth();return["JAN","FEV","MAR","AVR","MAI","JUN","JUI","AOU","SEP","OCT","NOV","DEC"][t]||"??"}export function creerDateLocale(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate(),12,0,0,0)}export function ajouterJours(e,t){const n=creerDateLocale(e);return n.setDate(n.getDate()+t),creerDateLocale(n)}export function dateProchainMardi(e){const t=creerDateLocale(e),i=(2-t.getDay()+7)%7;return t.setDate(t.getDate()+i),creerDateLocale(t)}export function datePrecedentMercredi(e=new Date){const t=new Date(e),n=t.getDay(),i=n>=3?n-3:7-(3-n);return t.setDate(t.getDate()-i),t}export function dateProchainMercredi(e=new Date){const t=new Date(e),n=t.getDay(),i=n<=3?3-n:7-n+3;return t.setDate(t.getDate()+i),t}export function formatDateJJMM(e){const t=e.getDate()<10?"0"+e.getDate():e.getDate().toString(),n=e.getMonth()+1<10?"0"+(e.getMonth()+1):(e.getMonth()+1).toString();return`${t}/${n}`}export function parseLocalDate(e){const t=e.slice(0,10),[n,i,r]=t.split("-").map(Number);return new Date(n,i-1,r)}export function formatDateJJMMStr(e){const t=e.slice(0,10),[n,i,r]=t.split("-");return`${r}/${i}`}export const formatterJJMM=new Intl.DateTimeFormat("fr-FR",{timeZone:"Europe/Paris",day:"2-digit",month:"2-digit"});export function formatDateLocalYYYYMMDD(e){const t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate(),r=n<10?"0"+n:String(n),o=i<10?"0"+i:String(i);return`${t}-${r}-${o}`}export function isDifferenceGreaterThanHours(e,t,n){const i=e.getTime(),r=t.getTime();return Math.abs(i-r)/(1e3*60*60)>n}export function isUUID(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e.trim())}export function validateEmail(e){return/^[^\s@]+@[^\s@]+\.[a-zA-Z]{2,}$/.test(e)}export function imageFilm(e){const t=`${u}/api/films/affichefile/`,n=`${u}/assets/static/`,i=e.slice(0,36);return(isUUID(i)?t:n)+e}export function syncTableColumnWidths(e){const t=e.querySelectorAll("thead tr th"),n=e.querySelector("tbody tr");if(!t.length||!n)return;const i=n.querySelectorAll("td");if(t.length!==i.length){console.error("Nombre de colonnes de l'entete et du tableau diff\xE9rent");return}else console.log("Calcul de la largeur des colonnes");i.forEach((r,o)=>{const s=r.getBoundingClientRect().width;t[o].style.width=`${s}px`})}export function isPasswordValid(e){const n=/[A-Z]/.test(e),i=/[a-z]/.test(e),r=/\d/.test(e),o=/[!@#$%^&*]/.test(e);return e.length>=8&&n&&i&&r&&o}export function validateObjectShape(e,t){if(typeof e!="object"||e===null)return!1;for(const n in t){const i=t[n],r=e[n];if(r==null){if(!i.startsWith("nullable"))return console.log(`\u26D4 ${n} est null/undefined mais ${i} requis`),!1;continue}const o=i.replace("nullable-","");if(typeof r!==o)return console.log(`\u26D4 ${n} a la valeur ${r}, mais type ${o} attendu`),!1}return!0}export function sanitizeFilm(e){const t=validateObjectShape(e,{id:"string",titleFilm:"string",filmPitch:"string",genreArray:"string",duration:"string",linkBO:"string",dateSortieCinePhoria:"string",categorySeeing:"string",note:"number",isCoupDeCoeur:"number",isActiveForNewSeances:"number",filmDescription:"string",filmAuthor:"string",filmDistribution:"string",imageFilm128:"string",imageFilm1024:"string"});return t||console.error("Anomalie sanitize Film"),t}export function sanitizeSeance(e){const t=validateObjectShape(e,{seanceId:"string",filmId:"string",salleId:"string",dateJour:"string",hourBeginHHSMM:"string",hourEndHHSMM:"string",qualite:"string",bo:"string",numFreeSeats:"number",numFreePMR:"number",alertAvailibility:"nullable-string",nameSalle:"string",nameCinema:"string",capacity:"number",numPMR:"number",rMax:"number",fMax:"number",seatsAbsents:"string",adresse:"string",ville:"string",postalcode:"string",emailCinema:"string",telCinema:"string"});return t||console.error("Anomalie sanitize Seance"),t}export function sanitizeCinema(e){const t=validateObjectShape(e,{nameCinema:"string",adresse:"string",ville:"string",postalcode:"string",emailCinema:"string",telCinema:"string",ligne1:"string",ligne2:"string"});return t||console.error("Anomalie sanitize Cinema"),t}export function sanitizeTarifQualite(e){const t=validateObjectShape(e,{id:"string",qualite:"string",nameTarif:"string",price:"number"});return t||console.error("Anomalie sanitize TarifQualite"),t}export function showCustomAlert(e){return g(this,void 0,void 0,function*(){return new Promise(t=>{const n=document.createElement("div");n.className="custom-alert-overlay";const i=document.createElement("div");i.className="custom-alert-modal",i.innerHTML=`<p>${e}</p>`;const r=document.createElement("button");r.textContent="OK",r.addEventListener("click",()=>{n.remove(),t()}),i.appendChild(r),n.appendChild(i),document.body.appendChild(n)})})}
