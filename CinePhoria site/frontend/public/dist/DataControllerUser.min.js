"use strict";var a=function(n,t,e,i){function l(s){return s instanceof e?s:new e(function(r){r(s)})}return new(e||(e=Promise))(function(s,r){function m(o){try{d(i.next(o))}catch(u){r(u)}}function h(o){try{d(i.throw(o))}catch(u){r(u)}}function d(o){o.done?s(o.value):l(o.value).then(m,h)}d((i=i.apply(n,t||[])).next())})};import{profilApi as p}from"./NetworkController.js";import{deleteCookie as f,getCookie as c,setCookie as _}from"./Helpers.js";export var ProfilUtilisateur;(function(n){n.Utilisateur="mesreservations.html",n.Administrateur="manageEmployes.html",n.Employee="manageAvis.html",n.Visiteur="visiteur.html"})(ProfilUtilisateur||(ProfilUtilisateur={}));export class DataControllerUser{get ident(){const t=c("ident");return this._ident=t,c("ident")}set ident(t){t!==""?(console.log("Mise a jour ident = "+t),_("ident",t,1),this._ident=t):(console.log("logout de ",this._ident),this._ident=void 0)}get comptes(){return this._comptes||[]}compte(){if(this._comptes)return this._comptes[0]}profil(){var t,e,i;return this.compte()===void 0?ProfilUtilisateur.Visiteur:!((t=this.compte())===null||t===void 0)&&t.matricule?!((e=this.compte())===null||e===void 0)&&e.isAdministrateur&&((i=this.compte())===null||i===void 0?void 0:i.isAdministrateur)===1?ProfilUtilisateur.Administrateur:ProfilUtilisateur.Employee:ProfilUtilisateur.Utilisateur}invalidate(){f("ident"),this._ident=void 0,this._comptes=void 0}init(){return a(this,void 0,void 0,function*(){try{if(this._ident!==void 0){const t=yield p(this._ident);t&&(console.log("Compte charg\xE9 pour ",this._ident),this._comptes=t)}}catch{this._ident=void 0}})}}export let userDataController=new DataControllerUser;
