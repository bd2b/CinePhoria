"use strict";var _=function(e,n,t,i){function l(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function a(d){try{s(i.next(d))}catch(u){c(u)}}function r(d){try{s(i.throw(d))}catch(u){c(u)}}function s(d){d.done?o(d.value):l(d.value).then(a,r)}s((i=i.apply(e,n||[])).next())})};import{dataController as D}from"./DataController.js";import{chargerMenu as x}from"./ViewMenu.js";import{chargerCinemaSites as b}from"./ViewFooter.js";import{filmsSelectAllApi as I}from"./NetworkController.js";export function onLoadManageFilms(){return _(this,void 0,void 0,function*(){console.log("=====> chargement onLoadFilms"),yield x(),yield b(),S()})}function S(){return _(this,void 0,void 0,function*(){const e=document.querySelector(".films__listFilms");if(!e)return;e.innerHTML="";let n=yield I();if(n.forEach(t=>{const i=A(t);e.appendChild(i)}),n.length>0){const t=D.selectedFilmUUID;if(t){const i=n.find(l=>l.id===t);i&&g(i)}else g(n[0])}else q()})}function A(e){var n,t,i,l;const o=document.createElement("div");o.classList.add("listFilms__simpleCard");const c=document.createElement("img");c.src=`assets/static/${(n=e.imageFilm128)!==null&&n!==void 0?n:""}`,c.alt="Affiche",c.classList.add("simpleCard__affiche-img");const a=document.createElement("div");a.classList.add("simpleCard__detail");const r=document.createElement("p");r.classList.add("simpleCard__detail-titre-p"),r.textContent=(t=e.titleFilm)!==null&&t!==void 0?t:"Sans Titre";const s=document.createElement("div");if(s.classList.add("simpleCard__evaluation"),e.isCoupDeCoeur){const f=document.createElement("div");f.classList.add("evaluation__coupdecoeur");const p=document.createElement("p");p.classList.add("evaluation__coupdecoeur-p"),p.textContent="Coup de coeur";const m=document.createElement("img");m.src="assets/heart.svg",m.alt="Coeur",m.classList.add("evaluation__coupdecoeur-img"),f.append(p,m),s.appendChild(f)}const d=document.createElement("div");d.classList.add("evaluation__note");const u=document.createElement("p");u.classList.add("evaluation__note-p"),u.textContent=`Avis : ${(i=e.note)!==null&&i!==void 0?i:0} / 5`,d.appendChild(u),s.appendChild(d);const v=document.createElement("p");return v.classList.add("simpleCard__detail-pitch-p"),v.textContent=(l=e.filmPitch)!==null&&l!==void 0?l:"",a.append(r,s,v),o.append(c,a),o.addEventListener("click",()=>{g(e)}),o}function g(e){return _(this,void 0,void 0,function*(){var n,t,i,l,o,c,a,r,s;const d=document.querySelector(".films__detailFilm");if(!d)return;const u=document.getElementById("affiche-small");u.src=`assets/static/${e.imageFilm128}`;const v=document.getElementById("affiche-large");v.src=`assets/static/${e.imageFilm1024}`;const f=document.getElementById("titleFilm");f&&(f.textContent=(n=e.titleFilm)!==null&&n!==void 0?n:"");const p=document.getElementById("genreArray");p&&(p.textContent=(t=e.genreArray)!==null&&t!==void 0?t:"");const m=document.getElementById("filmAuthor");m&&(m.textContent=(i=e.filmAuthor)!==null&&i!==void 0?i:"");const h=document.getElementById("duration");h&&(h.textContent=(l=e.duration)!==null&&l!==void 0?l:"");const y=document.getElementById("filmPitch");y&&(y.textContent=(o=e.filmPitch)!==null&&o!==void 0?o:"");const C=document.getElementById("filmDistribution");C&&(C.textContent=(c=e.filmDistribution)!==null&&c!==void 0?c:"");const E=document.getElementById("linkBO");E&&(E.textContent=(a=e.linkBO)!==null&&a!==void 0?a:"");const F=d.querySelector("#title__filter-dropdown-button-genre");F&&(F.innerHTML=`${e.categorySeeing}<span class="chevron">\u25BC</span>`);const L=d.querySelector("#coupCoeur");L&&(L.checked=(r=e.isCoupDeCoeur)!==null&&r!==void 0?r:!1);const B=document.getElementById("filmDescription");B&&(B.textContent=(s=e.filmDescription)!==null&&s!==void 0?s:""),console.log("D\xE9tail affich\xE9 pour "+e.titleFilm)})}function $(e){const n=document.getElementById("openModal"),t=document.getElementById("videoModal"),i=t?.querySelector(".closeyoutube"),l=document.getElementById("youtubeVideo"),o=`${e}?autoplay=1`;if(console.log("URL dynamique = ",o),n&&t&&i&&l&&o){n.addEventListener("click",()=>{t.style.display="flex",l.src=o,console.log("URL utilis\xE9e = ",l.src)});const c=()=>{t.style.display="none",l.src=""};i.addEventListener("click",c),t.addEventListener("click",a=>{a.target===t&&c()})}else console.error("Un ou plusieurs \xE9l\xE9ments requis pour le fonctionnement de la modal sont introuvables.")}function q(){const e=document.querySelector(".films__detailFilm");if(!e)return;const n=e.querySelector(".twocolumns__left-img");n&&(n.src="")}
